From eff51e1d1f5e5a9dd510e9a0b9633320c75110b1 Mon Sep 17 00:00:00 2001
From: Jason Hung <jhung@globalscaletechnologies.com>
Date: Thu, 23 Jan 2025 09:53:03 +0800
Subject: [PATCH 3/9] board: mt8370: add gti-mt510ss-evk firmware update uuid

add firmware update uuid for globalscale-mt510ss-evk platform
---
 board/mediatek/mt8370/mt8370_evk.c | 24 ++++++++++++++++++++++++
 include/configs/mt8370.h           | 16 ++++++++++++++++
 2 files changed, 40 insertions(+)

diff --git a/board/mediatek/mt8370/mt8370_evk.c b/board/mediatek/mt8370/mt8370_evk.c
index c671794dee..dccd4e72fd 100644
--- a/board/mediatek/mt8370/mt8370_evk.c
+++ b/board/mediatek/mt8370/mt8370_evk.c
@@ -64,6 +64,12 @@ static bool board_is_genio_510_evk_qspi(void)
 		of_machine_is_compatible("mediatek,genio-510-evk-qspi");
 }
 
+static bool board_is_gti_mt510ss_evk(void)
+{
+	return CONFIG_IS_ENABLED(TARGET_MT8370) &&
+		of_machine_is_compatible("globalscale,mt510ss-evk");
+}
+
 void mediatek_capsule_update_board_setup(void)
 {
 	fw_images[0].image_index = MT8370_FIT_IMAGE;
@@ -108,6 +114,24 @@ void mediatek_capsule_update_board_setup(void)
 		fw_images[2].fw_name = u"GENIO-510-EVK-QSPI-BL2";
 		fw_images[3].fw_name = u"GENIO-510-EVK-QSPI-FW";
 		fw_images[4].fw_name = u"GENIO-510-EVK-QSPI-ENV";
+	} else if (board_is_gti_mt510ss_evk()) {
+		efi_guid_t image_type_guid = GTI_MT510SS_EVK_FIT_IMAGE_GUID;
+		efi_guid_t uboot_image_type_guid = GTI_MT510SS_EVK_FIP_IMAGE_GUID;
+		efi_guid_t bl2_image_type_guid = GTI_MT510SS_EVK_BL2_IMAGE_GUID;
+		efi_guid_t fw_image_type_guid = GTI_MT510SS_EVK_FW_IMAGE_GUID;
+		efi_guid_t env_image_type_guid = GTI_MT510SS_EVK_ENV_IMAGE_GUID;
+
+		guidcpy(&fw_images[0].image_type_id, &image_type_guid);
+		guidcpy(&fw_images[1].image_type_id, &uboot_image_type_guid);
+		guidcpy(&fw_images[2].image_type_id, &bl2_image_type_guid);
+		guidcpy(&fw_images[3].image_type_id, &fw_image_type_guid);
+		guidcpy(&fw_images[4].image_type_id, &env_image_type_guid);
+
+		fw_images[0].fw_name = u"GTI-MT510SS-EVK-FIT";
+		fw_images[1].fw_name = u"GTI-MT510SS-EVK-FIP";
+		fw_images[2].fw_name = u"GTI-MT510SS-EVK-BL2";
+		fw_images[3].fw_name = u"GTI-MT510SS-EVK-FW";
+		fw_images[4].fw_name = u"GTI-MT510SS-EVK-ENV";
 	}
 }
 
diff --git a/include/configs/mt8370.h b/include/configs/mt8370.h
index 84e3810b8b..c5210bccd2 100644
--- a/include/configs/mt8370.h
+++ b/include/configs/mt8370.h
@@ -49,6 +49,22 @@
 	EFI_GUID(0x602d83ac, 0xcb13, 0x43ce, 0xb7, 0xbe, \
 		 0x4e, 0xab, 0x07, 0x5c, 0x98, 0xd1)
 
+#define GTI_MT510SS_EVK_FIT_IMAGE_GUID \
+	EFI_GUID(0x8b37443b, 0xc596, 0x45fd, 0x91, 0x3c, \
+		0x0a, 0xdd, 0xc7, 0x6f, 0x29, 0xc6)
+#define GTI_MT510SS_EVK_FIP_IMAGE_GUID \
+	EFI_GUID(0xf8191c07, 0x8c6f, 0x4f10, 0x96, 0x55, \
+		0x1b, 0x85, 0xed, 0xc7, 0x63, 0xe7)
+#define GTI_MT510SS_EVK_BL2_IMAGE_GUID \
+	EFI_GUID(0x87ef4432, 0xe654, 0x4ee5, 0x8e, 0xc7, \
+		0x11, 0x63, 0x8d, 0x9f, 0x27, 0x3f)
+#define GTI_MT510SS_EVK_FW_IMAGE_GUID \
+	EFI_GUID(0x531a7197, 0xb7cf, 0x4e25, 0x8f, 0x45, \
+		0xe8, 0x11, 0x02, 0xb7, 0xaa, 0xa6)
+#define GTI_MT510SS_EVK_ENV_IMAGE_GUID \
+	EFI_GUID(0x0826fd4e, 0x6eda, 0x414c, 0xa1, 0x81, \
+		0xfe, 0xbb, 0x02, 0xd3, 0x58, 0xa9)
+
 /* Environment settings */
 #include <config_distro_bootcmd.h>
 
-- 
2.47.1

